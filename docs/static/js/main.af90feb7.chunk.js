(this["webpackJsonpreact-single-project"]=this["webpackJsonpreact-single-project"]||[]).push([[0],{18:function(e,t,n){},19:function(e,t,n){},20:function(e,t,n){},22:function(e,t,n){},23:function(e,t,n){},24:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n(1),r=n.n(a),i=n(10),o=n.n(i),s=(n(16),n(4)),l=n.n(s),u=n(9),d=n(7),m=n(2);n(18);var h=function(){return Object(c.jsxs)("div",{className:"load-running",children:[Object(c.jsx)("i",{className:"dynamic-running"}),"\u52a0\u8f7d\u4e2d..."]})};n(19);var f=function(e){var t=e.reload;return Object(c.jsxs)("div",{className:"emptyContainer",children:[Object(c.jsx)("p",{className:"pic"}),Object(c.jsx)("p",{className:"notice",children:"\u6682\u65e0\u6570\u636e"}),Object(c.jsx)("p",{className:"tips",children:"\u51fa\u95e8\u5728\u5916\uff0c\u5f88\u5feb\u5c31\u56de\u6765\u2026"}),Object(c.jsx)("button",{onClick:t,children:"\u70b9\u51fb\u5237\u65b0"})]})},j=(n(20),function(e){var t=e.loading,n=e.children,r=e.onRefresh,i=e.noMore,o=e.indicatorFinish,s=void 0===o?"- \u5df2\u52a0\u8f7d\u5168\u90e8 -":o,l=Object(a.useRef)(null),u=Object(a.useRef)(t);return u.current=t,Object(a.useEffect)((function(){var e=function(){(function(e){var t=e.getBoundingClientRect();return t.top+t.height-document.documentElement.clientHeight<100})(l.current)&&!u.current&&r()};return window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}}),[r]),Object(c.jsxs)(c.Fragment,{children:[n,Object(c.jsx)("div",{className:"list-load-bootom",ref:l,children:i?s:Object(c.jsxs)("div",{className:"athm-loading",children:[Object(c.jsx)("i",{className:"athm-iconpng athm-iconpng-loadingblue"}),"\u52a0\u8f7d\u4e2d..."]})})]})});var b="list-row",g=function(e){var t=Object(a.useState)(!1),n=Object(m.a)(t,2),r=n[0],i=n[1],o=e.Row,s=e.getData,g=e.height,p=void 0===g?"100vh":g,v=Object(a.useRef)([]),O=Object(a.useState)(null),x=Object(m.a)(O,2),_=x[0],w=x[1],N=Object(a.useState)(!1),y=Object(m.a)(N,2),E=y[0],k=y[1],I=Object(a.useRef)({firstIndex:0,lastIndex:0}),R=Object(a.useRef)({container:null,containerOffsetTop:0,loadingDom:null,rowHeight:0}),C=Object(a.useCallback)((function(e,t){var n;(R.current.container||(R.current.container=document.getElementById("container"),R.current.containerOffsetTop=R.current.container.offsetTop),R.current.loadingDom||(R.current.loadingDom=document.getElementsByClassName("list-load-bootom")[0]),R.current.rowHeight)||(R.current.rowHeight=(null===(n=document.querySelectorAll(".".concat(b))[0])||void 0===n?void 0:n.offsetHeight)||0);var c=R.current,a=c.container,r=c.loadingDom,i=c.rowHeight,o=v.current.length;I.current={firstIndex:e,lastIndex:t},a.style.paddingTop="".concat(e*i,"px"),r&&(r.style.marginTop="".concat((o-t)*i,"px")),w(v.current.slice(e,t))}),[]),T=Object(a.useCallback)(Object(d.a)(l.a.mark((function e(){var t,n,c,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.prev=1,e.next=4,s();case 4:t=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:Array.isArray(t)&&(t.length<=0&&i(!0),v.current=[].concat(Object(u.a)(v.current),Object(u.a)(t))),n=I.current,n.firstIndex,c=n.lastIndex,a=v.current.length,C((c=c+10>a?a:c+10)-20>0?c-20:0,c);case 16:case"end":return e.stop()}}),e,null,[[1,7]])}))),[s,C]),M=Object(a.useCallback)(Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,k(!0),e.next=4,T();case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.log("catch loading false"),k(!1);case 10:case"end":return e.stop()}}),e,null,[[0,6]])}))),[T]),A=Object(a.useCallback)((function(){w(null),window.kzx&&"function"===typeof window.kzx.fetchMlist?T():w([])}),[T]);return Object(a.useEffect)((function(){var e=null;window.addEventListener("scroll",(function(){e&&(clearTimeout(e),e=null),e=setTimeout((function(){var e=document.querySelectorAll(".".concat(b));(function(e,t){if(!e||!e.length)return!1;var n=e[0].getBoundingClientRect().top,c=e[e.length-1].getBoundingClientRect().bottom,a=document.documentElement.clientHeight;return n<=t+200&&c>=a-36-200})(e,R.current.containerOffsetTop)||e[5]&&(console.log("offsetTop",document.getElementsByClassName("list-row")[5].offsetTop),console.log("paddingTop",document.getElementById("container").style.paddingTop),document.documentElement.scrollTop=document.body.scrollTop=e[5].offsetTop,console.log("scrollTop",document.body.scrollTop))}),200)}))}),[]),Object(a.useEffect)((function(){var e=null,t=null,n=new IntersectionObserver((function(n){n.forEach((function(n){if(n.isIntersecting){var c=I.current.firstIndex,a=v.current.length;if(n.target.id===e.id&&parseInt(e.id)>0){var r=c-10>0?c-10:0;C(r,r+20>=a?a:r+20)}else if(n.target.id===t.id&&parseInt(t.id)<v.current.length-1){var i=c+10,o=i+20>=a?a:i+20;i<o&&C(i,o)}}}))})),c=document.querySelectorAll(".".concat(b));return c.length>0&&(e=c[0],t=c[c.length-1],n.observe(e),n.observe(t)),k(!1),function(){n.disconnect()}}),[_]),Object(a.useEffect)((function(){A()}),[A]),Object(c.jsx)("div",{id:"container",style:{position:"relative",height:p},children:_?0===_.length?Object(c.jsx)(f,{reload:A}):Object(c.jsx)(j,{loading:E,onRefresh:M,noMore:r,indicatorDeactivate:"\u52a0\u8f7d\u4e2d\u2026",children:_.map((function(e,t){var n=I.current.firstIndex+t,c=n;return Object(a.cloneElement)(o(e),{className:b,key:n,id:c})}))}):Object(c.jsx)(h,{})})},p=n(8),v=n(26);function O(e,t){var n={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var c in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+c+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?n[c]:("00"+n[c]).substr((""+n[c]).length)));return t}function x(){var e=navigator.userAgent,t=document.cookie,n=/auto_(iphone|android)(;|%3B|\/)(\d+\.\d+\.\d+)/i,c=/.*app_key=auto_(iphone|android)(.*)app_ver=(\d+\.\d+\.\d+)/i,a=e.match(n)||t.match(c);return{isApp:/autohomeapp/.test(e)||n.test(e)||c.test(t),appKey:a&&a[1],appVer:a&&a[3]}}function _(e){window.location.href=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e)return"";var n=e.replace(/\s/g,""),c="autohome://";return-1!==n.indexOf(c)?n:x().appKey?"".concat(c,"insidebrowserwk?url=").concat(encodeURIComponent(n)):t?n.replace(/https?:/,""):e}(e)}n(22);var w=function(e){var t=e.i.split("|");return t.length>=3?Object(c.jsx)("div",{className:"athm-card",children:Object(c.jsxs)("a",{className:"athm-card-album43",onClick:function(){_(e.u)},children:[Object(c.jsx)("div",{className:"athm-card-album43__caption",children:e.t}),Object(c.jsxs)("div",{className:"athm-card-album43__album",children:[Object(c.jsx)("div",{className:"athm-card-album43__assist",children:Object(c.jsx)("img",{className:"lazyload","data-src":t[0],alt:""})}),Object(c.jsx)("div",{className:"athm-card-album43__assist",children:Object(c.jsx)("img",{className:"lazyload","data-src":t[1],alt:""})}),Object(c.jsx)("div",{className:"athm-card-album43__assist",children:Object(c.jsx)("img",{className:"lazyload","data-src":t[2],alt:""})})]}),Object(c.jsxs)("div",{className:"athm-card-unit-information",children:[Object(c.jsx)("div",{className:"athm-card-unit-information__item athm-card-unit-information__item--right",children:O(new Date(1e3*e.showtime),"M-d")}),Object(c.jsx)("div",{className:"athm-card-unit-information__assist",children:Object(c.jsx)("span",{className:"athm-card-unit-information__item",children:e.f})})]})]})}):t.length>=1?Object(c.jsx)("div",{className:"athm-card",children:Object(c.jsxs)("a",{className:"athm-card-thumb43 athm-card-thumb43__threerows",onClick:function(){_(e.u)},children:[Object(c.jsx)("div",{className:"athm-card-thumb43__assist",children:Object(c.jsx)("img",{className:"lazyload","data-src":t[0],alt:""})}),Object(c.jsx)("div",{className:"athm-card-thumb43__caption",children:e.t}),Object(c.jsxs)("div",{className:"athm-card-unit-information",children:[Object(c.jsx)("div",{className:"athm-card-unit-information__item athm-card-unit-information__item--right",children:O(new Date(1e3*e.showtime),"M-d")}),Object(c.jsx)("div",{className:"athm-card-unit-information__assist",children:Object(c.jsx)("span",{className:"athm-card-unit-information__item",children:e.f})})]})]})}):null},N={uid:function(){var e=Object(p.getCookie)("__CAR_MALL_UUID__")||function(e,t){try{var n=localStorage.getItem(e);return null===n||""===n?t:JSON.parse(n)}catch(c){return console.error(c),t}}("__CAR_MALL_UUID__","");return""===e&&function(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(n){console.error(n)}}("__CAR_MALL_UUID__",e=Object(v.a)()),e}(),sign:"ex_d5500b6f",c:"othercars",n:10},y=function(){return new Promise((function(e,t){window.kzx.fetchMlist(N).then((function(t){e(t)})),setTimeout((function(){t(new Error("time is out"))}),3e3)}))},E=function(){return Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{className:"header",children:"header"}),Object(c.jsx)(g,{Row:w,getData:y,height:"60vh"})]})};n(23);function k(e){var t=e.target,n=t.dataset.src&&t.dataset.src.replace(/^https?:/,"");t.dataset.src=n}var I=function(){return Object(a.useEffect)((function(){return document.addEventListener("lazybeforeunveil",k),function(){document.removeEventListener("lazybeforeunveil",k)}}),[]),Object(c.jsx)(E,{})};o.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(I,{})}),document.getElementById("root"))}},[[24,1,2]]]);
//# sourceMappingURL=main.af90feb7.chunk.js.map